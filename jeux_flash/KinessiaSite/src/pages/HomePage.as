package pages {	import com.gaiaframework.api.IBitmap;	import com.gaiaframework.api.IBitmapSprite;	import com.gaiaframework.templates.AbstractPage;	import com.greensock.TweenMax;	import flash.display.Bitmap;	import flash.display.Loader;	import flash.display.Shape;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.net.URLRequest;	public class HomePage extends AbstractPage {		private var _background:Bitmap;		private var _play:Sprite;		private var _tablette:Sprite;		private var _mobile:Sprite;				private var _gameContainer:Sprite;		private var _roseau3:Bitmap;		private var _croquis1:Bitmap;		private var _croquis2:Bitmap;		private var _walker:Bitmap;		private var _fleur1:Bitmap;		private var _fleur2:Bitmap;		private var _fleur3:Bitmap;		public function HomePage() {			super();			alpha = 0;			new Scaffold(this);		}		override public function transitionIn():void {			super.transitionIn();			TweenMax.to(this, 0.3, {alpha:1, onComplete:transitionInComplete});			_background = new Bitmap(IBitmap(assets.imgHome).bitmapData);			_background.x = (stage.stageWidth - _background.width) / 2;			addChild(_background);			_play = new Sprite();			addChild(_play);			_play.addChild(IBitmapSprite(assets.btnPlay).container);			_play.buttonMode = true;			_play.name = "play";			IBitmapSprite(assets.btnPlay).visible = true;			_play.x = (stage.stageWidth - _play.width) / 2 + 150;			_play.y = 425;			_tablette = new Sprite();			addChild(_tablette);			_tablette.addChild(IBitmapSprite(assets.btnAppli).container);			_tablette.buttonMode = true;			_tablette.name = "tablette";			IBitmapSprite(assets.btnAppli).visible = true;			_tablette.x = (stage.stageWidth - _tablette.width) / 2 - 100;			_tablette.y = 650;			_mobile = new Sprite();			addChild(_mobile);			_mobile.addChild(IBitmapSprite(assets.btnMobile).container);			_mobile.buttonMode = true;			_mobile.name = "mobile";			IBitmapSprite(assets.btnMobile).visible = true;			_mobile.x = (stage.stageWidth - _mobile.width) / 2 + 200;			_mobile.y = 650;			_roseau3 = new Bitmap(IBitmap(assets.roseau3).bitmapData);			_roseau3.x = (stage.stageWidth - _roseau3.width) / 2;			_roseau3.y = 980;			addChild(_roseau3);			_croquis1 = new Bitmap(IBitmap(assets.croquis1).bitmapData);			_croquis1.x = (stage.stageWidth - _croquis1.width) / 2 - 500;			_croquis1.y = 65;			addChild(_croquis1);			_croquis2 = new Bitmap(IBitmap(assets.croquis2).bitmapData);			_croquis2.x = (stage.stageWidth - _croquis2.width) / 2 + 750;			_croquis2.y = 220;			addChild(_croquis2);			_walker = new Bitmap(IBitmap(assets.walker).bitmapData);			_walker.x = (stage.stageWidth - _walker.width) / 2 - 350;			_walker.y = 600;			addChild(_walker);			_fleur1 = new Bitmap(IBitmap(assets.fleur1).bitmapData);			_fleur1.x = (stage.stageWidth - _fleur1.width) / 2 - 350;			_fleur1.y = 750;			addChild(_fleur1);			_fleur2 = new Bitmap(IBitmap(assets.fleur2).bitmapData);			_fleur2.x = (stage.stageWidth - _fleur2.width) / 2 + 500;			_fleur2.y = 700;			addChild(_fleur2);			_fleur3 = new Bitmap(IBitmap(assets.fleur3).bitmapData);			_fleur3.x = (stage.stageWidth - _fleur3.width) / 2 + 780;			_fleur3.y = 500;			addChild(_fleur3);			_play.addEventListener(MouseEvent.CLICK, _click);			_tablette.addEventListener(MouseEvent.CLICK, _click);			_mobile.addEventListener(MouseEvent.CLICK, _click);			stage.addEventListener(Event.RESIZE, _onResize);		}		private function _click(mEvt:MouseEvent):void {			switch (mEvt.currentTarget.name) {				case "play":					_gameContainer = new Sprite();					addChild(_gameContainer);					_gameContainer.addChild(IBitmapSprite(assets.gameContainer).container);					IBitmapSprite(assets.gameContainer).visible = true;					_gameContainer.x = (stage.stageWidth - _gameContainer.width) / 2;					_gameContainer.y = 245;										var loader:Loader = new Loader();					loader.load(new URLRequest("KinessiaGame.swf"));					loader.contentLoaderInfo.addEventListener(Event.COMPLETE, _gameLoaded);					break;				case "tablette":					trace("tablette à dl");					break;				case "mobile":					trace("mobile à dl");					break;			}		}		private function _gameLoaded(evt:Event):void {			evt.target.removeEventListener(Event.COMPLETE, _gameLoaded);						var shape:Shape = new Shape();			shape.graphics.beginFill(0xFF00000);			shape.graphics.drawRoundRect(45, 50, 950, 600, 10, 10);			shape.graphics.endFill();						_gameContainer.addChild(shape);						_gameContainer.addChild(evt.target.content);			evt.target.content.x = 45;			evt.target.content.x = 50;						evt.target.content.mask = shape;					}		private function _onResize(evt:Event):void {			_background.x = (stage.stageWidth - _background.width) / 2;			_play.x = (stage.stageWidth - _play.width) / 2 + 150;			_tablette.x = (stage.stageWidth - _tablette.width) / 2 - 100;			_mobile.x = (stage.stageWidth - _mobile.width) / 2 + 200;			_roseau3.x = (stage.stageWidth - _roseau3.width) / 2;			_croquis1.x = (stage.stageWidth - _croquis1.width) / 2 - 500;			_croquis2.x = (stage.stageWidth - _croquis2.width) / 2 + 750;			_walker.x = (stage.stageWidth - _walker.width) / 2 - 350;			_fleur1.x = (stage.stageWidth - _fleur1.width) / 2 - 350;			_fleur2.x = (stage.stageWidth - _fleur2.width) / 2 + 500;			_fleur3.x = (stage.stageWidth - _fleur3.width) / 2 + 780;		}		override public function transitionOut():void {			stage.removeEventListener(Event.RESIZE, _onResize);			_play.removeEventListener(MouseEvent.CLICK, _click);			_tablette.removeEventListener(MouseEvent.CLICK, _click);			_mobile.removeEventListener(MouseEvent.CLICK, _click);						super.transitionOut();			TweenMax.to(this, 0.3, {alpha:0, onComplete:transitionOutComplete});		}	}}